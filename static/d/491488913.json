{"data":{"allMediumFeed":{"nodes":[{"title":"git-tip: Managing your temporary code with stashed patches","link":"https://medium.com/@hndmrsh/git-tip-managing-your-temporary-code-with-stashed-patches-f59a6903f131?source=rss-1c5d88d3807------2","date":"09-28-2020","content":"<figure><img alt=\"\" src=\"https://cdn-images-1.medium.com/max/1024/1*_sfAUC5FHJNe9O6n-OLevg.jpeg\" /><figcaption>Image by <a href=\"https://pixabay.com/users/Bru-nO-1161770/?utm_source=link-attribution&amp;amp;utm_medium=referral&amp;amp;utm_campaign=image&amp;amp;utm_content=3365703\">Bruno /Germany</a> fromÂ <a href=\"https://pixabay.com/?utm_source=link-attribution&amp;amp;utm_medium=referral&amp;amp;utm_campaign=image&amp;amp;utm_content=3365703\">Pixabay</a></figcaption></figure><p>Sometimes in software development, you just need to write some temporary code. Iâ€™m not talking about the quote-unquote â€œtemporaryâ€ code that you occasionally find woven into the very fabric of the company, code thatâ€™s only weeks away from receiving a lifetime achievement awardâ€Šâ€”â€ŠIâ€™m talking about temporary code that helps you develop faster, but will never be shipped. For example, perhaps youâ€™re building a new feature that exists at the end of a complex flow, and you just want to add a little shortcut for yourself. Or perhaps youâ€™re building around a system that doesnâ€™t yet exist, so you want to hard-code in some dependencies. Whatever the reason, you know you donâ€™t want this code in your repoâ€Šâ€”â€Šthis is for your eyesÂ only!</p><p>Hereâ€™s a little workflow I discovered today which you might find useful in these situationsâ€Šâ€”â€Šthis may be obvious to you, but hopefully it will help someoneÂ out:</p><ol><li>From a clean workspace, write your temporary code.</li><li>Stash your changes with git stash push -a -m &quot;Patch for temporary workaround&quot; (message optional).</li><li>Apply (donâ€™t pop) your stash with git stash applyÂ Â¹.</li><li>Write your featureÂ code.</li><li>When it comes time to commit your feature code, unpatch your temporary code with git stash show -p | git apply --reverse Â¹â€Šâ€”â€Šthis should leave your workspace in a place where only your feature code (which you actually want to commit)Â exists.</li><li>Commit your featureÂ code.</li><li>Repeat steps 3â€“6 as required.</li></ol><p>[1] Note: if you have stashed/unstashed work as part of your feature development (step 4), you may need to refer to your temporary code patch by its indexâ€Šâ€”â€Šyou can find this with git stashÂ list.</p><p>By following these steps, you can safely write whatever temporary code you need to be efficient!</p><img src=\"https://medium.com/_/stat?event=post.clientViewed&referrerSource=full_rss&postId=f59a6903f131\" width=\"1\" height=\"1\" alt=\"\">"},{"title":"Dear Dagger: Iâ€™ve found someone new","link":"https://medium.com/@hndmrsh/dear-dagger-ive-found-someone-new-966314dcdc5f?source=rss-1c5d88d3807------2","date":"11-06-2019","content":"<h4>Koin is a dependency injection library that truly lovesÂ me</h4><p><em>Dear Dagger,</em></p><p><em>Weâ€™ve had some great times together, and Iâ€™ll always hold you dear to my heart. You introduced me to a world in which I always </em><a href=\"https://en.wikipedia.org/wiki/Dependency_injection\"><em>get what I want</em></a><em>. You helped me get what I needed before I even knew I needed it. Youâ€™ve helped me </em><a href=\"https://en.wikipedia.org/wiki/Unit_testing\"><em>be more confident inÂ myself</em></a><em>.</em></p><p><em>But weâ€™ve grown apart. Youâ€™re complicated. Youâ€™re difficult. You take up so much of my time. Iâ€™ve found another library that I feel a stronger connection with. They get me; I getÂ them.</em></p><p><em>Iâ€™ll never forgetÂ you.</em></p><p>I have a confession to make: I donâ€™t really understand how Dagger works. Iâ€™ve used it plenty, and reaped the benefits, but Iâ€™ve always struggled with it. Itâ€™s a complex beast, and Iâ€™ve never fully grasped it. Until now, Iâ€™ve been putting off implementing dependency injection in my Android project because Iâ€™ve been dreading trying to once more attempt to work out the best approach for the task. While Dagger is often praised for its flexibility, I didnâ€™t want to have to spend hours deciding between the numerous implementation strategies for my small projectâ€Šâ€”â€ŠI donâ€™t think Iâ€™ve ever read two blog posts which have implemented it the same way, and I wasnâ€™t prepared to make that decision.</p><figure><img alt=\"Stacks of coins\" src=\"https://cdn-images-1.medium.com/max/1024/0*PDhdr-rgo6F2cL5x\" /><figcaption>Photo by <a href=\"https://unsplash.com/@photoripey?utm_source=medium&amp;utm_medium=referral\">Ibrahim Rifath</a> onÂ <a href=\"https://unsplash.com?utm_source=medium&amp;utm_medium=referral\">Unsplash</a></figcaption></figure><h3>Koin operated</h3><p>Being a Kotlin developer, I had heard of <a href=\"https://insert-koin.io/\">Koin </a>before. I had always written it off as the less mature, less powerful alternative to Dagger. For my project, however, it revealed itself to me once more, and this time stood out as a potential solution to my problem. Koin sells itself as a <em>â€œ</em> <em>pragmatic lightweight dependency injection framework</em>â€â€Šâ€”â€ŠI needed to know for myself just how pragmatic and lightweight itÂ was.</p><h4>Set up</h4><p>Setting Koin up in an Android project is simple, and gives a good glimpse into its functional approach. All it requires is invoking the startKoin function in your App class and giving it a bunch of modules with which it can resolve dependencies.</p><pre><em>startKoin </em><strong>{</strong><br>    <em>androidContext</em>(<strong>this</strong>@App)<br>    modules(<em>listOf</em>(<br>            <em>databaseModule</em>,<br>            <em>mediaManagerModule</em>,<br>            <em>addItemModule<br>    </em>))<br><strong>}</strong></pre><p>You might choose to combine all your globally-scoped dependencies into a single appModule; my project uses features packages, so I wanted to have one module per featureâ€Šâ€”â€Šfor example, theÂ ../feature/additem/model/AddItemRepository class is injected by theÂ ../feature/additem/di/AddItemModule.</p><p>What do the modules look like, you may ask? Well, thatâ€™s simpleÂ too!</p><pre><strong>val </strong><em>mediaManagerModule </em>= <em>module </em><strong>{<br>    </strong>single <strong>{<br>        </strong>MediaManager()<br>    <strong>}<br>}</strong></pre><p>Thatâ€™s all thatâ€™s required for a globally-scoped singletonâ€Šâ€”â€ŠKoin will now be able to provide you with a reference to the MediaManager wherever you need it. Looking good soÂ far!</p><h4>Scoped dependencies</h4><p>If youâ€™re using Jetpackâ€™s Architecture Components, your ViewModels will (usually) have a one-to-one relationship with your Fragments or Activities, so it makes sense to scope them appropriately. Each of my features has its own Repository which provides access to the database, so this should be similarly scoped. Additionally, both the ViewModel and the Repository will have their own dependenciesâ€Šâ€”â€Šthe Repository is a dependency of the ViewModel, and the ViewModel also needs reference to the MediaManager singleton. Additionally, the Repository needs a reference to the appropriate <a href=\"https://en.wikipedia.org/wiki/Data_access_object\">DAOs</a> from the Database singleton.</p><p>How do we represent this using Koin?Â Easy!</p><pre><strong>val </strong><em>addItemModule </em>= <em>module </em><strong>{<br>    </strong>scope(<em>named</em>&lt;<strong>AddItemFragment</strong>&gt;()) <strong>{<br>        </strong>scoped <strong>{<br>            </strong>AddItemRepository(<br>                    get&lt;<strong>Database</strong>&gt;().itemDao()<br>            )<br>        <strong>}<br>        </strong><em>viewModel </em><strong>{<br>            </strong>AddItemViewModel(get(), get())<br>        <strong>}<br>    }<br>}</strong></pre><p>So whatâ€™s going on here? Simple: weâ€™ve created a scope which is named using the Fragment that the scope surrounds. Inside the scope, weâ€™ve declared two things: a scoped singleton dependency of AddItemRepository, and a viewModel dependency of AddItemViewModel (which tells Koin to provide the AddItemViewModel using Jetpackâ€™s ViewModelProviders static functions).</p><p>You might be wondering what the get() function does here. get() is the glue that helps us stick dependencies together by using Koin to inject dependencies that were declared either in this Module or a different one. When we constructed the AddItemRepository above, we told Koin to give us our Database dependency so that we can provide the approriate DAO; when we constructed the ViewModel, we told Koin to provide us with the AddItemRepository we just declared as well as the MediaManager singleton we declared in our previous globally-scoped module. Thanks to Kotlinâ€™s generic type inference, we donâ€™t need to specify the type returned by each call of the get() function, but note that each invocation returns a different type (see the declaration of the AddItemViewModel constructor below for clarification).</p><p>And thatâ€™s all we need to do to provide AddItemFragment its dependencies. If we wanted to share these dependencies across multiple Fragments, all we would have to do is pass a String into the non-generic overload of the named functionâ€Šâ€”â€Šfor example, named(&quot;USER_SESSION&quot;)â€Šâ€”â€Šand retrieve the dependencies from that scope in the appropriate Fragments using getKoin().getScope(name).</p><h4>Injection</h4><p>Before setting up dependency injection, our AddItemFragment looked something likeÂ this:</p><pre><strong>class AddItemFragment </strong>: Fragment() {<br><br>    <strong>private lateinit var </strong>viewModel: <strong>AddItemViewModel<br><br>    override fun </strong>onActivityCreated(savedInstanceState: <strong>Bundle</strong>?) {<br>        viewModel = <strong>ViewModelProviders</strong>.of(<strong>this</strong>)<br>                .get(<strong>AddItemViewModel</strong>::<strong>class</strong>.<em>java</em>)<br>    }</pre><pre>}</pre><p>And our AddItemViewModel looked something likeÂ this:</p><pre><strong>class AddItemViewModel</strong>(app: <strong>Application</strong>) : AndroidViewModel(app) {<br><br>    <strong>private val </strong>repository = <strong>AddItemRepository</strong>(<br>            <strong>Databse</strong>.getDatabase(application).itemDao()<br>    )<br><br>    <strong>private val </strong>mediaManager: <strong>MediaManager </strong>= MediaManager()<br>    <br>}</pre><p>Good luck mocking out those dependencies for unit testing purposes!</p><p>OK, so letâ€™s see how things look with our dependencies injected:</p><pre><strong>class AddItemFragment </strong>: Fragment() {<br><br>    <strong>private val </strong>viewModel <br>        <strong>by </strong><em>currentScope</em>.<em>viewModel</em>&lt;<strong>AddItemViewModel</strong>&gt;(<strong>this</strong>)<br><br>}</pre><p>Remember that we scoped our ViewModel to its corresponding Fragment in our Module, so we need to resolve it by using the correct scope. Koin provides us a nice shortcut to do this withâ€Šâ€”â€ŠcurrentScope will return the scope that was named&lt;AddItemFragment&gt;. <strong>Nice</strong>.</p><p>And the ViewModel?</p><pre><strong>class AddItemViewModel</strong>(<br>        <strong>private val </strong>repository: <strong>AddItemRepository</strong>,<br>        <strong>private val </strong>mediaManager: <strong>MediaManager<br></strong>) : ViewModel()</pre><p><em>Lovely. </em>Our dependencies have now been provided for us in the constructor, which means we can easily provide mocks instead when unit testing. Whatâ€™s more, things are scoped appropriately, enforcing good engineering practice: AddItemRepository is only accessible from the â€œadd itemâ€ context, while the MediaManagerâ€Šâ€”â€Ša helper class for handling photo and video filesâ€Šâ€”â€Šis a singleton shared across theÂ app.</p><h3>Closing thoughts</h3><p>Time will tell how Koin scales in my project, but Iâ€™m extremely happy with my initial experience. It has provided a clean and easy implementation of dependency injection, and it was fast to learn and implementâ€Šâ€”â€Ševen faster than it took me to write this post, in fact! And while I previously understood the concepts behind dependency injection, Koin has helped to demystify the implementation details which so often prevented me from loving Dagger unconditionally.</p><p>If you find yourself getting lost in the weeds with Dagger, give Koin a go. Its simplicity may just help you get over thatÂ hump.</p><p>If you enjoyed this post, donâ€™t forget to ğŸ‘, and then follow me on Twitter <a href=\"http://twitter.com/hndmrsh\">@hndmrsh</a>.</p><p>Iâ€™m also available for work, so <a href=\"https://www.linkedin.com/in/hndmrsh/\">connect with me on LinkedIn</a>Â too!</p><p><em>Thanks to /u/Zhuinden for pointing out that </em><a href=\"https://www.reddit.com/r/androiddev/comments/dsqpiy/dear_dagger_ive_found_someone_new_a_koin_love/f6s4c1a?utm_source=share&amp;utm_medium=web2x\"><em>the ViewModels no longer have to subclass AndroidViewModel</em></a><em>.</em></p><img src=\"https://medium.com/_/stat?event=post.clientViewed&referrerSource=full_rss&postId=966314dcdc5f\" width=\"1\" height=\"1\" alt=\"\">"},{"title":"Plungeâ€Šâ€”â€Šbetter deep linking for Android apps","link":"https://medium.com/default-to-open/plunge-better-deep-linking-for-android-apps-f331d0bb4648?source=rss-1c5d88d3807------2","date":"04-02-2019","content":"<h3>Plungeâ€Šâ€”â€Šbetter deep linking for AndroidÂ apps</h3><figure><img alt=\"\" src=\"https://cdn-images-1.medium.com/max/1024/1*Vl120ljVMPcoTGZE8GFpWA.jpeg\" /><figcaption>Plunge into the depths of yourÂ app</figcaption></figure><p>If you build or maintain an app which has a corresponding website, then youâ€™ll no doubt be aware of the hassle of dealing with deep linking. Ensuring your intent filters handle the right URLs and your routing logic is correct can be a real challenge. While itâ€™s possible to write comprehensive unit tests for your routing logic, doing the same for your intent filters isnâ€™t quite as straightforward.</p><p>Unless, of course, you useÂ <a href=\"https://github.com/TradeMe/Plunge\">Plunge</a>â€¦</p><h3>What isÂ Plunge?</h3><p>Plunge simplifies matching URLs to callbacks when a deep link is handled by the app, and provides an easy, coherent solution to verifying the behaviour of both your intent filters and your routing logic. Plunge gives you a simple domain-specific language to handle the routing, which includes the ability to extract useful information out of the URL required to route the user correctly.</p><h4>Yeah, butâ€¦ what IS Plunge,Â really?</h4><p>Well, Plunge is a UrlSchemeHandlerâ€¦</p><iframe src=\"\" width=\"0\" height=\"0\" frameborder=\"0\" scrolling=\"no\"><a href=\"https://medium.com/media/3c5e31a08f45b2bb339bfb6b687eaf1a/href\">https://medium.com/media/3c5e31a08f45b2bb339bfb6b687eaf1a/href</a></iframe><p>â€¦ which you use in your Activityâ€¦</p><iframe src=\"\" width=\"0\" height=\"0\" frameborder=\"0\" scrolling=\"no\"><a href=\"https://medium.com/media/5ca46ce56f12175a9923f2de69077c2e/href\">https://medium.com/media/5ca46ce56f12175a9923f2de69077c2e/href</a></iframe><p>â€¦ which you can write tests in JSONÂ forâ€¦</p><iframe src=\"\" width=\"0\" height=\"0\" frameborder=\"0\" scrolling=\"no\"><a href=\"https://medium.com/media/1441cb0b784c8fef00ac4ed997495731/href\">https://medium.com/media/1441cb0b784c8fef00ac4ed997495731/href</a></iframe><p>â€¦ which can be run as unit tests to test the routingÂ logicâ€¦</p><iframe src=\"\" width=\"0\" height=\"0\" frameborder=\"0\" scrolling=\"no\"><a href=\"https://medium.com/media/52f4db14e7c39edd38da5973e8fa8b9b/href\">https://medium.com/media/52f4db14e7c39edd38da5973e8fa8b9b/href</a></iframe><p>â€¦ or as a Gradle task to verify the intentÂ filters.</p><iframe src=\"\" width=\"0\" height=\"0\" frameborder=\"0\" scrolling=\"no\"><a href=\"https://medium.com/media/95555a55680859574cd5569aa6138869/href\">https://medium.com/media/95555a55680859574cd5569aa6138869/href</a></iframe><p>And thatâ€™sÂ Plunge!</p><h3>Check itÂ out!</h3><p>Plunge is <a href=\"https://github.com/TradeMe/Plunge\">available on GitHub</a>â€Šâ€”â€Šfull installation and implementation instructions areÂ there.</p><p>Donâ€™t forget to ğŸ‘, and follow me on all the socials <a href=\"http://twitter.com/hndmrsh\">@hndmrsh</a>. Also, check out Plunge co-author <a href=\"https://medium.com/u/68342880d9e0\">Jamie Sanson</a>â€™s post for <a href=\"https://medium.com/default-to-open/app-links-in-a-multi-app-ecosystem-f86e6c1e32e6\">more deep linkingÂ advice</a>.</p><img src=\"https://medium.com/_/stat?event=post.clientViewed&referrerSource=full_rss&postId=f331d0bb4648\" width=\"1\" height=\"1\" alt=\"\"><hr><p><a href=\"https://medium.com/default-to-open/plunge-better-deep-linking-for-android-apps-f331d0bb4648\">Plungeâ€Šâ€”â€Šbetter deep linking for Android apps</a> was originally published in <a href=\"https://medium.com/default-to-open\">Default to Open</a> on Medium, where people are continuing the conversation by highlighting and responding to this story.</p>"},{"title":"Tauhoko i Android","link":"https://medium.com/default-to-open/tauhoko-i-android-aee53c5fa975?source=rss-1c5d88d3807------2","date":"11-12-2018","content":"<h4>Supporting te reo MÄori on Trade Me for Android (and why itâ€™s such a challenge)</h4><figure><img alt=\"\" src=\"https://cdn-images-1.medium.com/max/1024/1*PgumUSrTditabThl6gmR0g.png\" /></figure><p><a href=\"https://play.google.com/store/apps/details?id=nz.co.trademe.trademe\">Trade Me for Android</a> has begun to learn a little te reo MÄori! Weâ€™ve held off translating the app until now due to the lack of MÄori language support in Android devices, but thanks to a little bit of development magic, we will soon be able to offer te reo to all our Android users. For the moment, though, you will only be able to use the app in te reo MÄori if your device supports itâ€Šâ€”â€Šat the time of writing, this is limited to a few Huawei devicesÂ only.</p><p><a href=\"https://medium.com/default-to-open/supporting-te-reo-m%C4%81ori-59cafec7eb8b\">Similarly to the iOS app before it</a>, Trade Me for Android will only show te reo in some of the most used parts of the app to begin with, but weâ€™ll continue to translate more and more of the app overÂ time.</p><h3>Supporting te reo on all AndroidÂ devices</h3><p>While the Android platform has built-in support for a huge number of languages, the devices shipped by manufacturers support a much smaller number. The reason for this is because manufacturers have to ensure that all the custom software they put on their deviceâ€Šâ€”â€Šincluding device settings, the phone app, the text messaging app, and so onâ€Šâ€”â€Šis translated into each of the languages they support. This is a huge amount of work, which means manufacturers need to make tough decisions about which languages make the cut. Unfortunately for us Kiwis, te reo MÄori is rarely one ofÂ them.</p><p>The good news is, Android is a very flexible development platform. Although you may not be able to set your deviceâ€™s language to te reo MÄori, we can trick our app into thinking your device is fluent! We can do this by overriding the locale set in the applicationâ€™s configuration at runtime, manually setting te reo as your preferred language for every screen in the app. Combined with the ability to set your preferred language from our app settings, youâ€™ll be able to use Tauhoko regardless of which device youÂ choose.</p><p>Android developers: if youâ€™re interested in supporting te reo MÄori in your apps, get in touch. Weâ€™ll be sharing more detail about how you can make these changes to your appsÂ soon.</p><p>Owners of non-Huawei devices: keep an eye out for future app releasesâ€Šâ€”â€Šweâ€™ll be bringing te reo MÄori support to all devices veryÂ soon.</p><p>MÄ teÂ wÄ!</p><p>If you want to get in touch with me directly, feel free to <a href=\"http://twitter.com/hndmrsh\">reach out onÂ Twitter</a>.</p><img src=\"https://medium.com/_/stat?event=post.clientViewed&referrerSource=full_rss&postId=aee53c5fa975\" width=\"1\" height=\"1\" alt=\"\"><hr><p><a href=\"https://medium.com/default-to-open/tauhoko-i-android-aee53c5fa975\">Tauhoko i Android</a> was originally published in <a href=\"https://medium.com/default-to-open\">Default to Open</a> on Medium, where people are continuing the conversation by highlighting and responding to this story.</p>"}],"totalCount":4}}}